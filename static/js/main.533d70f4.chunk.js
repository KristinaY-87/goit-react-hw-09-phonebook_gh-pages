(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[3],{10:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return d}));var r=n(3),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),l=Object(r.b)("contacts/deleteContactSuccess"),j=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeFilter")},15:function(t,e,n){"use strict";n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return q})),n.d(e,"c",(function(){return _.a}));var r,c,a,u,o=n(3),s=Object(o.b)("auth/registerRequest"),i=Object(o.b)("auth/registerSuccess"),b=Object(o.b)("auth/registerError"),l=Object(o.b)("auth/loginRequest"),j=Object(o.b)("auth/loginSuccess"),d=Object(o.b)("auth/loginError"),O={registerRequest:s,registerSuccess:i,registerError:b,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=n(2),g=n(7),h={name:null,email:null},p=Object(o.c)(h,(r={},Object(f.a)(r,O.registerSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.loginSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.logoutSuccess,(function(){return h})),Object(f.a)(r,O.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),x=Object(o.c)(null,(c={},Object(f.a)(c,O.registerSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.loginSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.logoutSuccess,(function(){return null})),c)),v=function(t,e){return e.payload},k=Object(o.c)(null,(a={},Object(f.a)(a,O.registerError,v),Object(f.a)(a,O.loginError,v),Object(f.a)(a,O.logoutError,v),Object(f.a)(a,O.getCurrentUserError,v),a)),m=Object(o.c)(!1,(u={},Object(f.a)(u,O.registerSuccess,(function(){return!0})),Object(f.a)(u,O.loginSuccess,(function(){return!0})),Object(f.a)(u,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(u,O.registerError,(function(){return!1})),Object(f.a)(u,O.loginError,(function(){return!1})),Object(f.a)(u,O.getCurrentUserError,(function(){return!1})),Object(f.a)(u,O.logoutSuccess,(function(){return!1})),u)),y=Object(g.b)({user:p,isAuthenticated:m,token:x,error:k}),S=n(17),C=n.n(S),E=n(23),U=n(18),A=n.n(U);A.a.defaults.baseURL="https://connections-api.herokuapp.com";var w=function(t){A.a.defaults.headers.common.Authorization="Bearer ".concat(t)},R=function(){A.a.defaults.headers.common.Authorization=""},q={register:function(t){return function(){var e=Object(E.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.registerRequest()),e.prev=1,e.next=4,A.a.post("/users/signup",t);case 4:r=e.sent,w(r.data.token),n(O.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(O.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(E.a)(C.a.mark((function t(e){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O.logoutRequest()),t.prev=1,t.next=4,A.a.post("/users/logout");case 4:R(),e(O.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(O.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(E.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.loginRequest()),e.prev=1,e.next=4,A.a.post("/users/login",t);case 4:r=e.sent,w(r.data.token),n(O.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(O.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(E.a)(C.a.mark((function t(e,n){var r,c,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return w(c),e(O.getCurrentUserRequest()),t.prev=5,t.next=8,A.a.get("/users/current");case 8:a=t.sent,e(O.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(O.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},_=n(20)},20:function(t,e,n){"use strict";e.a={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name}}},24:function(t,e,n){t.exports={container:"UserMenu_container__1KkSm",avatar:"UserMenu_avatar__2Lcpy",name:"UserMenu_name__26eR7",btn:"UserMenu_btn__2izf0"}},56:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(25),u=n.n(a),o=n(16),s=n(8),i=n(44),b=(n(56),n(6)),l=n(45),j=n.n(l),d=n(15),O=n(1),f={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function g(){var t=Object(s.c)(d.c.getIsAuthenticated);return Object(O.jsxs)("nav",{children:[Object(O.jsx)(o.b,{to:"/",exact:!0,style:f.link,activeStyle:f.activeLink,children:"Home"}),t&&Object(O.jsx)(o.b,{to:"/contacts",exact:!0,style:f.link,activeStyle:f.activeLink,children:"Contacts"})]})}var h=n.p+"static/media/default-avatar.e44fc4e2.png",p=n(24),x=n.n(p);function v(){var t=Object(s.b)(),e=Object(s.c)(d.c.getUsername),n=Object(r.useCallback)((function(){return t(d.a.logOut())}),[t]);return Object(O.jsxs)("div",{className:x.a.container,children:[Object(O.jsx)("img",{src:h,alt:"",width:"32",className:x.a.avatar}),Object(O.jsxs)("span",{className:x.a.name,children:["Welcome, ",e,"!"]}),Object(O.jsx)("button",{className:x.a.btn,type:"button",onClick:n,children:"Logout"})]})}var k={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},m=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(o.b,{to:"/register",exact:!0,style:k.link,activeStyle:k.activeLink,children:"Sign up"}),Object(O.jsx)(o.b,{to:"/login",exact:!0,style:k.link,activeStyle:k.activeLink,children:"Log in"})]})},y={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function S(){var t=Object(s.c)(d.c.getIsAuthenticated);return Object(O.jsxs)("header",{style:y.header,children:[Object(O.jsx)(g,{}),t?Object(O.jsx)(v,{}):Object(O.jsx)(m,{})]})}var C=n(19),E=n(28),U=n(20),A=["children","isAuthenticated","redirectTo"],w=function(t){var e=t.children,n=(t.isAuthenticated,t.redirectTo),r=Object(E.a)(t,A),c=Object(s.c)(U.a.getIsAuthenticated);return Object(O.jsx)(b.b,Object(C.a)(Object(C.a)({},r),{},{children:c?e:Object(O.jsx)(b.a,{to:n})}))},R=["children","isAuthenticated","redirectTo"],q=function(t){var e=t.children,n=(t.isAuthenticated,t.redirectTo),r=Object(E.a)(t,R),c=Object(s.c)(U.a.getIsAuthenticated);return Object(O.jsx)(b.b,Object(C.a)(Object(C.a)({},r),{},{children:c&&r.restricted?Object(O.jsx)(b.a,{to:n}):e}))},_=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,105))})),L=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,106))})),z=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,107))})),I=Object(r.lazy)((function(){return n.e(0).then(n.bind(null,108))}));function T(){var t=Object(s.b)();return Object(r.useEffect)((function(){t(d.a.getCurrentUser())}),[t]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(S,{}),Object(O.jsx)(r.Suspense,{fallback:Object(O.jsx)(j.a,{type:"Puff",color:"#00BFFF",height:80,width:80}),children:Object(O.jsxs)(b.d,{children:[Object(O.jsx)(q,{exact:!0,path:"/",component:_}),Object(O.jsx)(q,{path:"/register",restricted:!0,component:L,redirectTo:"/"}),Object(O.jsx)(q,{path:"/login",restricted:!0,component:z,redirectTo:"/contacts"}),Object(O.jsx)(w,{path:"/contacts",component:I,redirectTo:"/login"})]})})]})}var B,F,M=n(3),N=n(46),W=n.n(N),D=n(33),J=n(47),H=n.n(J),K=n(2),P=n(48),G=n(7),Q=n(10),V=Object(M.c)([],(B={},Object(K.a)(B,Q.j,(function(t,e){return e.payload})),Object(K.a)(B,Q.c,(function(t,e){var n=e.payload;return[].concat(Object(P.a)(t),[n])})),Object(K.a)(B,Q.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),B)),X=Object(M.c)("",Object(K.a)({},Q.d,(function(t,e){return e.payload}))),Y=Object(M.c)(!1,(F={},Object(K.a)(F,Q.i,(function(){return!0})),Object(K.a)(F,Q.j,(function(){return!1})),Object(K.a)(F,Q.h,(function(){return!1})),Object(K.a)(F,Q.b,(function(){return!0})),Object(K.a)(F,Q.c,(function(){return!1})),Object(K.a)(F,Q.a,(function(){return!1})),Object(K.a)(F,Q.f,(function(){return!0})),Object(K.a)(F,Q.g,(function(){return!1})),Object(K.a)(F,Q.e,(function(){return!1})),F)),Z=Object(G.b)({items:V,filter:X,loading:Y}),$={key:"auth",storage:H.a,whitelist:["token"]},tt=Object(M.a)({reducer:{auth:Object(D.a)($,d.b),contacts:Z},middleware:function(t){return t({serializableCheck:!1}).concat(W.a)},devTools:!1}),et={store:tt,persistor:Object(D.b)(tt)};u.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(s.a,{store:et.store,children:Object(O.jsx)(i.a,{loading:null,persistor:et.persistor,children:Object(O.jsx)(o.a,{children:Object(O.jsx)(T,{})})})})}),document.getElementById("root"))}},[[98,5,6]]]);
//# sourceMappingURL=main.533d70f4.chunk.js.map